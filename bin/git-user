#!/usr/bin/env nu

def main [name?: string email?: string]: nothing -> nothing {
  if ($name == null) != ($email == null) {
    error make { msg: "expected a name and email or neither" }
  }

  git rev-parse

  if $name != null {
    git config user.name $name
    git config user.email $email
    git config credential.username $name
    return
  }

  do -i {
    git config --unset user.name
    git config --unset user.email
    git config --unset credential.username
  }
}
